prefixes:
  xsd: http://www.w3.org/2001/XMLSchema#
  rr: http://www.w3.org/ns/r2rml#
  rml: http://semweb.mmlab.be/ns/rml#
  rdf: http://www.w3.org/1999/02/22-rdf-syntax-ns#
  ql: http://semweb.mmlab.be/ns/ql#
  rdfs: http://www.w3.org/2000/01/rdf-schema#
  foaf: http://xmlns.com/foaf/0.1/
  schema: http://schema.org/
  dc: http://purl.org/dc/elements/1.1/
  skos: http://www.w3.org/2004/02/skos/core#
  univ: http://openuniversitydata/def#
  estud: http://openuniversitydata/def/estudios-y-estudiantes#
  geosparql: http://www.owl-ontologies.com/geosparql#
  org: http://www.w3.org/ns/org#
  dct: http://purl.org/dc/terms/
  geo: http://www.owl-ontologies.com/geo#

mappings:
  triplesMapAgregacionpaisesunivdestino:
    sources:
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_agregacion_paises_univ_destino)
    po:
      - [a, univ:AgregacionPaisesUnivDestino]
      - [dct:identifier, $(cod_agregacion_paises_univ_destino)]
      - [rdfs:subClassOf, univ:ContinenteUnivDestino]

  triplesMapContinenteunivdestino:
    sources:
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_continente_univ_destino)
    po:
      - [a, univ:ContinenteUnivDestino]
      - [dct:identifier, $(cod_continente_univ_destino)]

  triplesMapUniversidaddestino:
    sources:
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_universidad_destino)
    po:
      - [a, univ:UniversidadDestino]
      - [dct:identifier, $(cod_universidad_destino)]
      - [univ:ambitoUnivDestino, http://openuniversitydata/kos/ambito-univ-destino/$(des_ambito_univ_destino)]
      - [rdfs:subClassOf, org:Organization]
      - p: univ:estaUbicada2
        o:
        - mapping: triplesMapContinenteunivdestino
          condition:
            function: equal
            parameters:
              - [str1, $(des_continente_univ_destino), o]
              - [str2, $(des_continente_univ_destino), o]
      - p: univ:estaUbicada2
        o:
        - mapping: triplesMapMunicipiodestino
          condition:
            function: equal
            parameters:
              - [str1, $(des_municipio_destino), o]
              - [str2, $(des_municipio_destino), o]
      - p: univ:estaUbicada2
        o:
        - mapping: triplesMapPaisunivdestino
          condition:
            function: equal
            parameters:
              - [str1, $(des_pais_univ_destino), o]
              - [str2, $(des_pais_univ_destino), o]
      - p: univ:estaUbicada2
        o:
        - mapping: triplesMapAgregacionpaisesunivdestino
          condition:
            function: equal
            parameters:
              - [str1, $(des_agregacion_paises_univ_destino), o]
              - [str2, $(des_agregacion_paises_univ_destino), o]
      - p: univ:estaUbicada2
        o:
        - mapping: triplesMapComunidaddestino
          condition:
            function: equal
            parameters:
              - [str1, $(des_comunidad_destino), o]
              - [str2, $(des_comunidad_destino), o]
      - p: univ:estaUbicada2
        o:
        - mapping: triplesMapProvinciadestino
          condition:
            function: equal
            parameters:
              - [str1, $(des_provincia_destino), o]
              - [str2, $(des_provincia_destino), o]

  triplesMapUniversidadprocedencia:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_universidad_procedencia)
    po:
      - [a, univ:UniversidadProcedencia]
      - [dct:identifier, $(cod_universidad_procedencia)]
      - [univ:ambitoUnivProcedencia, http://openuniversitydata/kos/ambito-univ-procedencia/$(des_ambito_univ_procedencia)]
      - [rdfs:subClassOf, org:Organization]
      - p: univ:estaUbicada1
        o:
        - mapping: triplesMapAgregacionpaisesunivprocedencia
          condition:
            function: equal
            parameters:
              - [str1, $(des_agregacion_paises_univ_procedencia), o]
              - [str2, $(des_agregacion_paises_univ_procedencia), o]
      - p: univ:estaUbicada1
        o:
        - mapping: triplesMapContinenteunivprocedencia
          condition:
            function: equal
            parameters:
              - [str1, $(des_continente_univ_procedencia), o]
              - [str2, $(des_continente_univ_procedencia), o]
      - p: univ:estaUbicada1
        o:
        - mapping: triplesMapPaisunivprocedencia
          condition:
            function: equal
            parameters:
              - [str1, $(des_pais_univ_procedencia), o]
              - [str2, $(des_pais_univ_procedencia), o]
      - p: univ:estaUbicada1
        o:
        - mapping: triplesMapMunicipiounivprocedencia
          condition:
            function: equal
            parameters:
              - [str1, $(des_municipio_univ_procedencia), o]
              - [str2, $(des_municipio_univ_procedencia), o]

  triplesMapUniversidad:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_universidad)
    po:
      - [a, univ:Universidad]
      - [dct:identifier, $(cod_universidad)]
      - [rdfs:subClassOf, org:Organization]
      - p: univ:proporciona
        o:
        - mapping: triplesMapProgramamovilidad
          condition:
            function: equal
            parameters:
              - [str1, $(des_programa_movilidad), o]
              - [str2, $(des_programa_movilidad), o]
      - p: univ:tieneAsociado
        o:
        - mapping: triplesMapCursoacademico
          condition:
            function: equal
            parameters:
              - [str1, $(curso_academico), o]
              - [str2, $(curso_academico), o]

  triplesMapProgramamovilidad:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_programa_movilidad)
    po:
      - [a, estud:ProgramaMovilidad]
      - [dct:identifier, $(cod_programa_movilidad)]
      - [estud:tipoProgramaMov, http://openuniversitydata/kos/estudios-y-estudiantes/tipo-programa-mov/$(des_tipo_programa_mov)]

  triplesMapCursoacademico:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(curso_academico)
    po:
      - [a, univ:CursoAcademico]

  triplesMapEstudiante:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$()
    po:
      - [a, estud:Estudiante]
      - [estud:anioNacimiento, $(anio_nacimiento), xsd:integer]
      - [estud:mesFinPrograma, $(mes_fin_programa), xsd:date]
      - [estud:mesInicioPrograma, $(mes_inicio_programa), xsd:date]
      - [estud:genero, http://openuniversitydata/kos/estudios-y-estudiantes/genero/$(des_genero)]
      - [estud:nivelFormativo, http://openuniversitydata/kos/estudios-y-estudiantes/nivel-formativo/$(des_nivel_formativo)]
      - [rdfs:subClassOf, schema:Person]
      - p: estud:cursa
        o:
        - mapping: triplesMapTitulacion
          condition:
            function: equal
            parameters:
              - [str1, $(des_titulacion), o]
              - [str2, $(des_titulacion), o]
      - p: estud:estudia
        o:
        - mapping: triplesMapUniversidad
          condition:
            function: equal
            parameters:
              - [str1, $(des_universidad), o]
              - [str2, $(des_universidad), o]
      - p: estud:tiene1
        o:
        - mapping: triplesMapUniversidadprocedencia
          condition:
            function: equal
            parameters:
              - [str1, $(des_universidad_procedencia), o]
              - [str2, $(des_universidad_procedencia), o]
      - p: estud:tiene2
        o:
        - mapping: triplesMapUniversidaddestino
          condition:
            function: equal
            parameters:
              - [str1, $(des_universidad_destino), o]
              - [str2, $(des_universidad_destino), o]
      - p: estud:posee
        o:
        - mapping: triplesMapAgregacionpaisesnacionalidad
          condition:
            function: equal
            parameters:
              - [str1, $(des_agregacion_paises_nacionalidad), o]
              - [str2, $(des_agregacion_paises_nacionalidad), o]
      - p: estud:posee
        o:
        - mapping: triplesMapContinentenacionalidad
          condition:
            function: equal
            parameters:
              - [str1, $(des_continente_nacionalidad), o]
              - [str2, $(des_continente_nacionalidad), o]
      - p: estud:posee
        o:
        - mapping: triplesMapPaisnacionalidad
          condition:
            function: equal
            parameters:
              - [str1, $(des_pais_nacionalidad), o]
              - [str2, $(des_pais_nacionalidad), o]

  # triplesMapPerson:
  #   sources:
  #     - [Ent-UC3M-2019-20.csv~csv]
  #     - [Sal-UC3M-2019-20.csv~csv]
  #   s: http://openuniversitydata/recurso/$()
  #   po:
  #     - [a, schema:Person]
     
  triplesMapPoint:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_pais_nacionalidad)
    po:
      - [a, geosparql:Point]
      - [geo:lat, $(lat_pais_nacionalidad), xsd:double]
      - [geo:long, $(lon_pais_nacionalidad), xsd:double]
      - [rdfs:subClassOf, geosparql:Geometry]

  triplesMapPoint2:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_municipio_destino)
    po:
      - [a, geosparql:Point]
      - [geo:lat, $(lat_municipio_destino), xsd:double]
      - [geo:long, $(lon_municipio_destino), xsd:double]
      - [rdfs:subClassOf, geosparql:Geometry]

  triplesMapPoint3:
    sources:
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_pais_univ_destino)
    po:
      - [a, geosparql:Point]
      - [geo:lat, $(lat_pais_univ_destino), xsd:double]
      - [geo:long, $(lon_pais_univ_destino), xsd:double]
      - [rdfs:subClassOf, geosparql:Geometry]

  triplesMapPoint4:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_pais_univ_procedencia)
    po:
      - [a, geosparql:Point]
      - [geo:lat, $(lat_pais_univ_procedencia), xsd:double]
      - [geo:long, $(lon_pais_univ_procedencia), xsd:double]
      - [rdfs:subClassOf, geosparql:Geometry]

  # triplesMapGeometry:
  #   sources:
  #     - [Ent-UC3M-2019-20.csv~csv]
  #     - [Sal-UC3M-2019-20.csv~csv]
  #   s: http://openuniversitydata/recurso/($(longitude),$(latitude))
  #   po:
  #     - [a, geosparql:Geometry]
  #     - [geosparql:asWKT, ($(longitude),$(latitude))]
  #     - p: geosparql:hasGeometry
  #       o:
  #       - mapping: triplesMapFeature
  #         condition:
  #           function: equal
  #           parameters:
  #             - [str1, $()]
  #             - [str2, $()]

  # triplesMapFeature:
  #   sources:
  #     - [Ent-UC3M-2019-20.csv~csv]
  #     - [Sal-UC3M-2019-20.csv~csv]
  #   s: http://openuniversitydata/recurso/$()
  #   po:
  #     - [a, geosparql:Feature]

  # triplesMapOrganization:
  #   sources:
  #     - [Ent-UC3M-2019-20.csv~csv]
  #     - [Sal-UC3M-2019-20.csv~csv]
  #   s: http://openuniversitydata/recurso/$(des_universidad)
  #   s: http://openuniversitydata/recurso/$(des_universidad_procedencia)
  #   s: http://openuniversitydata/recurso/$(des_universidad_destino)
  #   po:
  #     - [a, org:Organization]
  #     - p: org:hasSite
  #       o:
  #       - mapping: triplesMapSite
  #         condition:
  #           function: equal
  #           parameters:
  #             - [str1, $()]
  #             - [str2, $()]

  # triplesMapSite:
  #   sources:
  #     - [Ent-UC3M-2019-20.csv~csv]
  #     - [Sal-UC3M-2019-20.csv~csv]
  #   s: http://openuniversitydata/recurso/$()
  #   po:
  #     - [a, org:Site]

  triplesMapAgregacionpaisesunivprocedencia:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_agregacion_paises_univ_procedencia)
    po:
      - [a, univ:AgregacionPaisesUnivProcedencia]
      - [dct:identifier, $(cod_agregacion_paises_univ_procedencia)]
      - [rdfs:subClassOf, univ:ContinenteUnivProcedencia]

  triplesMapContinenteunivprocedencia:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_continente_univ_procedencia)
    po:
      - [a, univ:ContinenteUnivProcedencia]
      - [dct:identifier, $(cod_continente_univ_procedencia)]

  triplesMapComunidaddestino:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_comunidad_destino)
    po:
      - [a, univ:ComunidadDestino]
      - [dct:identifier, $(cod_comunidad_destino)]

  triplesMapMunicipiodestino:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_municipio_destino)
    po:
      - [a, univ:MunicipioDestino]
      - [dct:identifier, $(cod_municipio_destino)]
      - [rdfs:subClassOf, univ:ProvinciaDestino]

  triplesMapProvinciadestino:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_provincia_destino)
    po:
      - [a, univ:ProvinciaDestino]
      - [dct:identifier, $(cod_provincia_destino)]
      - [rdfs:subClassOf, univ:ComunidadDestino]

  triplesMapMunicipiounivprocedencia:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_municipio_univ_procedencia)
    po:
      - [a, univ:MunicipioUnivProcedencia]
      - [dct:identifier, $(cod_municipio_univ_procedencia)]
      - [rdfs:subClassOf, univ:PaisUnivProcedencia]

  triplesMapPaisunivprocedencia:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_pais_univ_procedencia)
    po:
      - [a, univ:PaisUnivProcedencia]
      - [dct:identifier, $(cod_pais_univ_procedencia)]
      - [rdfs:subClassOf, univ:ContinenteUnivProcedencia]

  triplesMapPaisunivdestino:
    sources:
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_pais_univ_destino)
    po:
      - [a, univ:PaisUnivDestino]
      - [dct:identifier, $(cod_pais_univ_destino)]
      - [rdfs:subClassOf, univ:ContinenteUnivDestino]

  triplesMapAgregacionpaisesnacionalidad:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_agregacion_paises_nacionalidad)
    po:
      - [a, estud:AgregacionPaisesNacionalidad]
      - [dct:identifier, $(cod_agregacion_paises_nacionalidad)]
      - [rdfs:subClassOf, estud:ContinenteNacionalidad]
      
  triplesMapContinentenacionalidad:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_continente_nacionalidad)
    po:
      - [a, estud:ContinenteNacionalidad]
      - [dct:identifier, $(cod_continente_nacionalidad)]

  triplesMapPaisnacionalidad:
    sources:
      - [Ent-UC3M-2019-20.csv~csv]
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_pais_nacionalidad)
    po:
      - [a, estud:PaisNacionalidad]
      - [dct:identifier, $(cod_pais_nacionalidad)]
      - [rdfs:subClassOf, estud:ContinenteNacionalidad]

  triplesMapTitulacion:
    sources:
      - [Sal-UC3M-2019-20.csv~csv]
    s: http://openuniversitydata/recurso/$(des_titulacion)
    po:
      - [a, estud:Titulacion]
      - [dct:identifier, $(cod_titulacion)]

  # triplesMapSpatialobject:
  #   sources:
  #     - [Ent-UC3M-2019-20.csv~csv]
  #     - [Sal-UC3M-2019-20.csv~csv]
  #   s: http://openuniversitydata/recurso/$()
  #   po:
  #     - [a, geosparql:SpatialObject]
